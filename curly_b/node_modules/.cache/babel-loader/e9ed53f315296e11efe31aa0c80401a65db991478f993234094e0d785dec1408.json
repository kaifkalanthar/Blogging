{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MOHAMED KAIF\\\\OneDrive\\\\Documents\\\\React.js\\\\Blogging\\\\curly_b\\\\src\\\\component\\\\logIn.jsx\",\n  _this = this;\nimport React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from '../common/input';\nimport Button from '../common/button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = () => {\n  handleChange = _ref => {\n    let {\n      currentTarget: input\n    } = _ref;\n    const errors = {\n      ...this.state.errors\n    };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n    const data = {\n      ...this.state.data\n    };\n    data[input.name] = input.value;\n    this.setState({\n      errors,\n      data\n    });\n  };\n  validateProperty = _ref2 => {\n    let {\n      name,\n      value\n    } = _ref2;\n    const obj = {\n      [name]: value\n    };\n    const schema = {\n      [name]: this.schema[name]\n    };\n    const {\n      error\n    } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n  validate = () => {\n    const options = {\n      abortEarly: false\n    };\n    const {\n      error\n    } = Joi.validate(this.state.data, this.schema, options);\n    if (!error) return null;\n    const errors = {};\n    for (let item of error.details) errors[item.path[0]] = item.message;\n    return errors;\n  };\n  handleSubmit = e => {\n    e.preventDefault();\n    const errors = this.validate();\n    this.setState({\n      errors: errors || {}\n    });\n    if (errors) return;\n    this.doSubmit();\n  };\n  renderButton = label => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      label: label,\n      disabled: this.validate()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 16\n    }, this);\n  };\n  renderInput = function (name, label) {\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"text\";\n    const {\n      errors\n    } = _this.state;\n    return /*#__PURE__*/_jsxDEV(Input, {\n      name: name,\n      placeholder: label,\n      type: type,\n      handleChange: _this.handleChange,\n      error: errors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, _this);\n  };\n  doSubmit = async () => {\n    const {\n      username,\n      password\n    } = this.state.data;\n    const response = await fetch('http://localhost:4000/login', {\n      method: 'POST',\n      body: JSON.stringify(username, password),\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"form-container\",\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), this.renderInput(\"username\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Login\")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this);\n  };\n  // class Login extends Form {\n  //     state = {\n  //         data: { username: \"\", password: \"\" },\n  //         errors: {}\n  //     }\n  //     schema = {\n  //         username: Joi.string().required().email().label(\"Username\"),\n  //         password: Joi.string().required().label(\"Password\")\n  //     }\n\n  // try {\n  //     const { data } = this.state;\n  //     const { data: jwt } = await http.post(\"http://localhost:4000/login\", {\n  //         username: data.username,\n  //         password: data.password\n  //     }).then(response => {\n  //         var token = response.data.token;\n  //         localStorage.setItem('token', JSON.stringify(token));\n  //     }).catch(error => {\n  //         if (!error.response) {\n  //             this.errorStatus = 'Error: Network Error';\n  //         } else {\n  //             this.errorStatus = error.response.data.message;\n  //         }\n  //     })\n  //     console.log(jwt);\n  // } catch (ex) {\n  //     if (ex.response && ex.response.status === 400) {\n  //         const errors = { ...this.state.errors };\n  //         errors.username = ex.response.data;\n  //         this.setState({ errors });\n  //     }\n  // }\n};\n\n//         return (\n\n// }\n\n// export default Login;\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","Component","Joi","Input","Button","jsxDEV","_jsxDEV","Login","handleChange","_ref","currentTarget","input","errors","state","errorMessage","validateProperty","name","data","value","setState","_ref2","obj","schema","error","validate","details","message","options","abortEarly","item","path","handleSubmit","e","preventDefault","doSubmit","renderButton","label","disabled","fileName","_jsxFileName","lineNumber","columnNumber","renderInput","type","arguments","length","undefined","_this","placeholder","username","password","response","fetch","method","body","JSON","stringify","headers","credentials","id","children","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/src/component/logIn.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Input from '../common/input';\r\nimport Button from '../common/button';\r\nexport const Login = () => {\r\n\r\n    handleChange = ({ currentTarget: input }) => {\r\n        const errors = { ...this.state.errors };\r\n        const errorMessage = this.validateProperty(input);\r\n        if (errorMessage) errors[input.name] = errorMessage;\r\n        else delete errors[input.name];\r\n\r\n        const data = { ...this.state.data };\r\n        data[input.name] = input.value;\r\n        this.setState({ errors, data });\r\n    }\r\n\r\n    validateProperty = ({ name, value }) => {\r\n        const obj = { [name]: value };\r\n        const schema = { [name]: this.schema[name] };\r\n        const { error } = Joi.validate(obj, schema);\r\n        return error ? error.details[0].message : null;\r\n    }\r\n\r\n    validate = () => {\r\n        const options = { abortEarly: false };\r\n        const { error } = Joi.validate(this.state.data, this.schema, options);\r\n        if (!error) return null;\r\n\r\n        const errors = {};\r\n        for (let item of error.details) errors[item.path[0]] = item.message;\r\n        return errors;\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const errors = this.validate();\r\n        this.setState({ errors: errors || {} });\r\n        if (errors) return;\r\n\r\n        this.doSubmit();\r\n    }\r\n\r\n    renderButton = (label) => {\r\n        return <Button label={label} disabled={this.validate()} />\r\n    }\r\n\r\n    renderInput =(name, label, type = \"text\")=> {\r\n        const { errors } = this.state;\r\n        return <Input\r\n            name={name}\r\n            placeholder={label}\r\n            type={type}\r\n            handleChange={this.handleChange}\r\n            error={errors} />\r\n    }\r\n\r\n    doSubmit = async () => {\r\n\r\n        const { username, password } = this.state.data;\r\n        const response = await fetch('http://localhost:4000/login', {\r\n            method: 'POST',\r\n            body: JSON.stringify(username, password),\r\n            headers: { 'Content-Type': 'application/json' },\r\n            credentials: 'include'\r\n        });\r\n    return ( \r\n        <div id=\"form\">\r\n                <form id=\"form-container\" onSubmit={this.handleSubmit}>\r\n                    <h1>Login</h1>\r\n                    {this.renderInput(\"username\", \"Username\")}\r\n                    {this.renderInput(\"password\", \"Password\", \"password\")}\r\n                    {this.renderButton(\"Login\")}\r\n                </form>\r\n            </div>\r\n        \r\n     );\r\n}\r\n// class Login extends Form {\r\n//     state = {\r\n//         data: { username: \"\", password: \"\" },\r\n//         errors: {}\r\n//     }\r\n//     schema = {\r\n//         username: Joi.string().required().email().label(\"Username\"),\r\n//         password: Joi.string().required().label(\"Password\")\r\n//     }\r\n\r\n    \r\n\r\n        // try {\r\n        //     const { data } = this.state;\r\n        //     const { data: jwt } = await http.post(\"http://localhost:4000/login\", {\r\n        //         username: data.username,\r\n        //         password: data.password\r\n        //     }).then(response => {\r\n        //         var token = response.data.token;\r\n        //         localStorage.setItem('token', JSON.stringify(token));\r\n        //     }).catch(error => {\r\n        //         if (!error.response) {\r\n        //             this.errorStatus = 'Error: Network Error';\r\n        //         } else {\r\n        //             this.errorStatus = error.response.data.message;\r\n        //         }\r\n        //     })\r\n        //     console.log(jwt);\r\n        // } catch (ex) {\r\n        //     if (ex.response && ex.response.status === 400) {\r\n        //         const errors = { ...this.state.errors };\r\n        //         errors.username = ex.response.data;\r\n        //         this.setState({ errors });\r\n        //     }\r\n        // }\r\n    }\r\n    \r\n//         return (\r\n            \r\n    \r\n// }\r\n\r\n// export default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}