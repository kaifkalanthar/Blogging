{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _defineProperty from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Joi from'joi-browser';import Button from'./button';import Input from'../common/input';import{jsx as _jsx}from\"react/jsx-runtime\";var Form=/*#__PURE__*/function(_Component){_inherits(Form,_Component);var _super=_createSuper(Form);function Form(){var _this;_classCallCheck(this,Form);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{},errors:{}};_this.handleChange=function(_ref){var input=_ref.currentTarget;var errors=_objectSpread({},_this.state.errors);var errorMessage=_this.validateProperty(input);if(errorMessage)errors[input.name]=errorMessage;else delete errors[input.name];var data=_objectSpread({},_this.state.data);data[input.name]=input.value;_this.setState({errors:errors,data:data});};_this.validateProperty=function(_ref2){var name=_ref2.name,value=_ref2.value;var obj=_defineProperty({},name,value);var schema=_defineProperty({},name,_this.schema[name]);var _Joi$validate=Joi.validate(obj,schema),error=_Joi$validate.error;return error?error.details[0].message:null;};_this.validate=function(){var options={abortEarly:false};var _Joi$validate2=Joi.validate(_this.state.data,_this.schema,options),error=_Joi$validate2.error;if(!error)return null;var errors={};var _iterator=_createForOfIteratorHelper(error.details),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;errors[item.path[0]]=item.message;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return errors;};_this.handleSubmit=function(e){e.preventDefault();var errors=_this.validate();_this.setState({errors:errors||{}});if(errors)return;_this.doSubmit();};return _this;}_createClass(Form,[{key:\"renderButton\",value:function renderButton(label){return/*#__PURE__*/_jsx(Button,{label:label,disabled:this.validate()});}},{key:\"renderInput\",value:function renderInput(name,label){var type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"text\";var errors=this.state.errors;return/*#__PURE__*/_jsx(Input,{name:name,placeholder:label,type:type,handleChange:this.handleChange,error:errors});}}]);return Form;}(Component);export default Form;","map":{"version":3,"names":["React","Component","Joi","Button","Input","jsx","_jsx","Form","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","data","errors","handleChange","_ref","input","currentTarget","_objectSpread","errorMessage","validateProperty","name","value","setState","_ref2","obj","_defineProperty","schema","_Joi$validate","validate","error","details","message","options","abortEarly","_Joi$validate2","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","path","err","e","f","handleSubmit","preventDefault","doSubmit","_createClass","key","renderButton","label","disabled","renderInput","type","undefined","placeholder"],"sources":["C:/Users/MOHAMED KAIF/OneDrive/Documents/React.js/Blogging/curly_b/src/common/form.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Button from './button';\r\nimport Input from '../common/input';\r\n\r\nclass Form extends Component {\r\n    state = {\r\n        data: {},\r\n        errors: {}\r\n    }\r\n\r\n    handleChange = ({ currentTarget: input }) => {\r\n        const errors = { ...this.state.errors };\r\n        const errorMessage = this.validateProperty(input);\r\n        if (errorMessage) errors[input.name] = errorMessage;\r\n        else delete errors[input.name];\r\n\r\n        const data = { ...this.state.data };\r\n        data[input.name] = input.value;\r\n        this.setState({ errors, data });\r\n    }\r\n\r\n    validateProperty = ({ name, value }) => {\r\n        const obj = { [name]: value };\r\n        const schema = { [name]: this.schema[name] };\r\n        const { error } = Joi.validate(obj, schema);\r\n        return error ? error.details[0].message : null;\r\n    }\r\n\r\n    validate = () => {\r\n        const options = { abortEarly: false };\r\n        const { error } = Joi.validate(this.state.data, this.schema, options);\r\n        if (!error) return null;\r\n\r\n        const errors = {};\r\n        for (let item of error.details) errors[item.path[0]] = item.message;\r\n        return errors;\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const errors = this.validate();\r\n        this.setState({ errors: errors || {} });\r\n        if (errors) return;\r\n\r\n        this.doSubmit();\r\n    }\r\n\r\n    renderButton(label) {\r\n        return <Button label={label} disabled={this.validate()} />\r\n    }\r\n\r\n    renderInput(name, label, type = \"text\") {\r\n        const { errors } = this.state;\r\n        return <Input\r\n            name={name}\r\n            placeholder={label}\r\n            type={type}\r\n            handleChange={this.handleChange}\r\n            error={errors} />\r\n    }\r\n}\r\n\r\nexport default Form;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}